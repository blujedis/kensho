!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["@kensho/form"]={})}(this,(function(t){"use strict";const e=["INPUT","SELECT","TEXTAREA"],n=["email","number","date","datetime-local","time","url","tel","color"],r=[...n,"textarea"],o={initialized:!1,validating:!1,pristine:!0,dirty:!1,valid:!0,invalid:!1,submitting:!1,submitted:!1};var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},u="__lodash_hash_undefined__",a="[object Function]",c="[object GeneratorFunction]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,f=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,y="object"==typeof i&&i&&i.Object===Object&&i,v="object"==typeof self&&self&&self.Object===Object&&self,_=y||v||Function("return this")();var b,g=Array.prototype,m=Function.prototype,j=Object.prototype,A=_["__core-js_shared__"],O=(b=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",w=m.toString,T=j.hasOwnProperty,E=j.toString,$=RegExp("^"+w.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=_.Symbol,S=g.splice,k=D(_,"Map"),V=D(Object,"create"),z=x?x.prototype:void 0,F=z?z.toString:void 0;function L(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function P(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function I(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function M(t,e){for(var n,r,o=t.length;o--;)if((n=t[o][0])===(r=e)||n!=n&&r!=r)return o;return-1}function C(t,e){var n;e=function(t,e){if(B(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||W(t))return!0;return s.test(t)||!l.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:B(n=e)?n:R(n);for(var r=0,o=e.length;null!=t&&r<o;)t=t[G(e[r++])];return r&&r==o?t:void 0}function N(t){if(!q(t)||(e=t,O&&O in e))return!1;var e,n=function(t){var e=q(t)?E.call(t):"";return e==a||e==c}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?$:h;return n.test(function(t){if(null!=t){try{return w.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function U(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function D(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return N(n)?n:void 0}L.prototype.clear=function(){this.__data__=V?V(null):{}},L.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},L.prototype.get=function(t){var e=this.__data__;if(V){var n=e[t];return n===u?void 0:n}return T.call(e,t)?e[t]:void 0},L.prototype.has=function(t){var e=this.__data__;return V?void 0!==e[t]:T.call(e,t)},L.prototype.set=function(t,e){return this.__data__[t]=V&&void 0===e?u:e,this},P.prototype.clear=function(){this.__data__=[]},P.prototype.delete=function(t){var e=this.__data__,n=M(e,t);return!(n<0)&&(n==e.length-1?e.pop():S.call(e,n,1),!0)},P.prototype.get=function(t){var e=this.__data__,n=M(e,t);return n<0?void 0:e[n][1]},P.prototype.has=function(t){return M(this.__data__,t)>-1},P.prototype.set=function(t,e){var n=this.__data__,r=M(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},I.prototype.clear=function(){this.__data__={hash:new L,map:new(k||P),string:new L}},I.prototype.delete=function(t){return U(this,t).delete(t)},I.prototype.get=function(t){return U(this,t).get(t)},I.prototype.has=function(t){return U(this,t).has(t)},I.prototype.set=function(t,e){return U(this,t).set(t,e),this};var R=H((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(W(t))return F?F.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return f.test(t)&&n.push(""),t.replace(p,(function(t,e,r,o){n.push(r?o.replace(d,"$1"):e||t)})),n}));function G(t){if("string"==typeof t||W(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function H(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return n.cache=i.set(o,u),u};return n.cache=new(H.Cache||I),n}H.Cache=I;var B=Array.isArray;function q(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function W(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==E.call(t)}var X=function(t,e,n){var r=null==t?void 0:C(t,e);return void 0===r?n:r},Y="__lodash_hash_undefined__",K="[object Function]",J="[object GeneratorFunction]",Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,tt=/^\./,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nt=/\\(\\)?/g,rt=/^\[object .+?Constructor\]$/,ot=/^(?:0|[1-9]\d*)$/,it="object"==typeof i&&i&&i.Object===Object&&i,ut="object"==typeof self&&self&&self.Object===Object&&self,at=it||ut||Function("return this")();var ct=Array.prototype,lt=Function.prototype,st=Object.prototype,ft=at["__core-js_shared__"],pt=function(){var t=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),dt=lt.toString,ht=st.hasOwnProperty,yt=st.toString,vt=RegExp("^"+dt.call(ht).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_t=at.Symbol,bt=ct.splice,gt=Vt(at,"Map"),mt=Vt(Object,"create"),jt=_t?_t.prototype:void 0,At=jt?jt.toString:void 0;function Ot(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Tt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Et(t,e,n){var r=t[e];ht.call(t,e)&&It(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function $t(t,e){for(var n=t.length;n--;)if(It(t[n][0],e))return n;return-1}function xt(t){if(!Ct(t)||(e=t,pt&&pt in e))return!1;var e,n=function(t){var e=Ct(t)?yt.call(t):"";return e==K||e==J}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?vt:rt;return n.test(function(t){if(null!=t){try{return dt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function St(t,e,n,r){if(!Ct(t))return t;e=function(t,e){if(Mt(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||Nt(t))return!0;return Z.test(t)||!Q.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:function(t){return Mt(t)?t:Ft(t)}(e);for(var o=-1,i=e.length,u=i-1,a=t;null!=a&&++o<i;){var c=Lt(e[o]),l=n;if(o!=u){var s=a[c];void 0===(l=r?r(s,c,a):void 0)&&(l=Ct(s)?s:zt(e[o+1])?[]:{})}Et(a,c,l),a=a[c]}return t}function kt(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function Vt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return xt(n)?n:void 0}function zt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||ot.test(t))&&t>-1&&t%1==0&&t<e}Ot.prototype.clear=function(){this.__data__=mt?mt(null):{}},Ot.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Ot.prototype.get=function(t){var e=this.__data__;if(mt){var n=e[t];return n===Y?void 0:n}return ht.call(e,t)?e[t]:void 0},Ot.prototype.has=function(t){var e=this.__data__;return mt?void 0!==e[t]:ht.call(e,t)},Ot.prototype.set=function(t,e){return this.__data__[t]=mt&&void 0===e?Y:e,this},wt.prototype.clear=function(){this.__data__=[]},wt.prototype.delete=function(t){var e=this.__data__,n=$t(e,t);return!(n<0)&&(n==e.length-1?e.pop():bt.call(e,n,1),!0)},wt.prototype.get=function(t){var e=this.__data__,n=$t(e,t);return n<0?void 0:e[n][1]},wt.prototype.has=function(t){return $t(this.__data__,t)>-1},wt.prototype.set=function(t,e){var n=this.__data__,r=$t(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},Tt.prototype.clear=function(){this.__data__={hash:new Ot,map:new(gt||wt),string:new Ot}},Tt.prototype.delete=function(t){return kt(this,t).delete(t)},Tt.prototype.get=function(t){return kt(this,t).get(t)},Tt.prototype.has=function(t){return kt(this,t).has(t)},Tt.prototype.set=function(t,e){return kt(this,t).set(t,e),this};var Ft=Pt((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(Nt(t))return At?At.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return tt.test(t)&&n.push(""),t.replace(et,(function(t,e,r,o){n.push(r?o.replace(nt,"$1"):e||t)})),n}));function Lt(t){if("string"==typeof t||Nt(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Pt(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return n.cache=i.set(o,u),u};return n.cache=new(Pt.Cache||Tt),n}function It(t,e){return t===e||t!=t&&e!=e}Pt.Cache=Tt;var Mt=Array.isArray;function Ct(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Nt(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==yt.call(t)}var Ut=function(t,e,n){return null==t?t:St(t,e,n)},Dt="__lodash_hash_undefined__",Rt=9007199254740991,Gt="[object Arguments]",Ht=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bt=/^\w*$/,qt=/^\./,Wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xt=/\\(\\)?/g,Yt=/^\[object .+?Constructor\]$/,Kt=/^(?:0|[1-9]\d*)$/,Jt="object"==typeof i&&i&&i.Object===Object&&i,Qt="object"==typeof self&&self&&self.Object===Object&&self,Zt=Jt||Qt||Function("return this")();var te=Array.prototype,ee=Function.prototype,ne=Object.prototype,re=Zt["__core-js_shared__"],oe=function(){var t=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ie=ee.toString,ue=ne.hasOwnProperty,ae=ne.toString,ce=RegExp("^"+ie.call(ue).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),le=Zt.Symbol,se=ne.propertyIsEnumerable,fe=te.splice,pe=Oe(Zt,"Map"),de=Oe(Object,"create"),he=le?le.prototype:void 0,ye=he?he.toString:void 0;function ve(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function _e(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function be(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ge(t,e){for(var n,r,o=t.length;o--;)if((n=t[o][0])===(r=e)||n!=n&&r!=r)return o;return-1}function me(t,e){return null!=t&&ue.call(t,e)}function je(t){if(!Ve(t)||(e=t,oe&&oe in e))return!1;var e,n=Se(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?ce:Yt;return n.test(function(t){if(null!=t){try{return ie.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function Ae(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function Oe(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return je(n)?n:void 0}function we(t,e,n){var r;e=function(t,e){if(xe(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||Fe(t))return!0;return Bt.test(t)||!Ht.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:xe(r=e)?r:Te(r);for(var o,i=-1,u=e.length;++i<u;){var a=Ee(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||!!(u=t?t.length:0)&&ke(u)&&function(t,e){return!!(e=null==e?Rt:e)&&("number"==typeof t||Kt.test(t))&&t>-1&&t%1==0&&t<e}(a,u)&&(xe(t)||function(t){return function(t){return ze(t)&&function(t){return null!=t&&ke(t.length)&&!Se(t)}(t)}(t)&&ue.call(t,"callee")&&(!se.call(t,"callee")||ae.call(t)==Gt)}(t))}ve.prototype.clear=function(){this.__data__=de?de(null):{}},ve.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},ve.prototype.get=function(t){var e=this.__data__;if(de){var n=e[t];return n===Dt?void 0:n}return ue.call(e,t)?e[t]:void 0},ve.prototype.has=function(t){var e=this.__data__;return de?void 0!==e[t]:ue.call(e,t)},ve.prototype.set=function(t,e){return this.__data__[t]=de&&void 0===e?Dt:e,this},_e.prototype.clear=function(){this.__data__=[]},_e.prototype.delete=function(t){var e=this.__data__,n=ge(e,t);return!(n<0)&&(n==e.length-1?e.pop():fe.call(e,n,1),!0)},_e.prototype.get=function(t){var e=this.__data__,n=ge(e,t);return n<0?void 0:e[n][1]},_e.prototype.has=function(t){return ge(this.__data__,t)>-1},_e.prototype.set=function(t,e){var n=this.__data__,r=ge(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},be.prototype.clear=function(){this.__data__={hash:new ve,map:new(pe||_e),string:new ve}},be.prototype.delete=function(t){return Ae(this,t).delete(t)},be.prototype.get=function(t){return Ae(this,t).get(t)},be.prototype.has=function(t){return Ae(this,t).has(t)},be.prototype.set=function(t,e){return Ae(this,t).set(t,e),this};var Te=$e((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(Fe(t))return ye?ye.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return qt.test(t)&&n.push(""),t.replace(Wt,(function(t,e,r,o){n.push(r?o.replace(Xt,"$1"):e||t)})),n}));function Ee(t){if("string"==typeof t||Fe(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function $e(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return n.cache=i.set(o,u),u};return n.cache=new($e.Cache||be),n}$e.Cache=be;var xe=Array.isArray;function Se(t){var e=Ve(t)?ae.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}function ke(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Rt}function Ve(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function ze(t){return!!t&&"object"==typeof t}function Fe(t){return"symbol"==typeof t||ze(t)&&"[object Symbol]"==ae.call(t)}var Le=function(t,e){return null!=t&&we(t,e,me)},Pe={exports:{}};!function(t,e){var n="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",u="[object Function]",a="[object Object]",c=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s[o]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s[u]=s["[object Map]"]=s["[object Number]"]=s[a]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;var f="object"==typeof i&&i&&i.Object===Object&&i,p="object"==typeof self&&self&&self.Object===Object&&self,d=f||p||Function("return this")(),h=e&&!e.nodeType&&e,y=h&&t&&!t.nodeType&&t,v=y&&y.exports===h,_=v&&f.process,b=function(){try{var t=y&&y.require&&y.require("util").types;return t||_&&_.binding&&_.binding("util")}catch(t){}}(),g=b&&b.isTypedArray;function m(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var j,A,O=Array.prototype,w=Function.prototype,T=Object.prototype,E=d["__core-js_shared__"],$=w.toString,x=T.hasOwnProperty,S=function(){var t=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),k=T.toString,V=$.call(Object),z=RegExp("^"+$.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=v?d.Buffer:void 0,L=d.Symbol,P=d.Uint8Array,I=F?F.allocUnsafe:void 0,M=(j=Object.getPrototypeOf,A=Object,function(t){return j(A(t))}),C=Object.create,N=T.propertyIsEnumerable,U=O.splice,D=L?L.toStringTag:void 0,R=function(){try{var t=ht(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),G=F?F.isBuffer:void 0,H=Math.max,B=Date.now,q=ht(d,"Map"),W=ht(Object,"create"),X=function(){function t(){}return function(e){if(!Et(e))return{};if(C)return C(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Y(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function K(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function J(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Q(t){var e=this.__data__=new K(t);this.size=e.size}function Z(t,e){var n=jt(t),r=!n&&mt(t),o=!n&&!r&&Ot(t),i=!n&&!r&&!o&&xt(t),u=n||r||o||i,a=u?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=a.length;for(var l in t)!e&&!x.call(t,l)||u&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||yt(l,c))||a.push(l);return a}function tt(t,e,n){(void 0!==n&&!gt(t[e],n)||void 0===n&&!(e in t))&&rt(t,e,n)}function et(t,e,n){var r=t[e];x.call(t,e)&&gt(r,n)&&(void 0!==n||e in t)||rt(t,e,n)}function nt(t,e){for(var n=t.length;n--;)if(gt(t[n][0],e))return n;return-1}function rt(t,e,n){"__proto__"==e&&R?R(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}Y.prototype.clear=function(){this.__data__=W?W(null):{},this.size=0},Y.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Y.prototype.get=function(t){var e=this.__data__;if(W){var r=e[t];return r===n?void 0:r}return x.call(e,t)?e[t]:void 0},Y.prototype.has=function(t){var e=this.__data__;return W?void 0!==e[t]:x.call(e,t)},Y.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=W&&void 0===e?n:e,this},K.prototype.clear=function(){this.__data__=[],this.size=0},K.prototype.delete=function(t){var e=this.__data__,n=nt(e,t);return!(n<0)&&(n==e.length-1?e.pop():U.call(e,n,1),--this.size,!0)},K.prototype.get=function(t){var e=this.__data__,n=nt(e,t);return n<0?void 0:e[n][1]},K.prototype.has=function(t){return nt(this.__data__,t)>-1},K.prototype.set=function(t,e){var n=this.__data__,r=nt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},J.prototype.clear=function(){this.size=0,this.__data__={hash:new Y,map:new(q||K),string:new Y}},J.prototype.delete=function(t){var e=dt(this,t).delete(t);return this.size-=e?1:0,e},J.prototype.get=function(t){return dt(this,t).get(t)},J.prototype.has=function(t){return dt(this,t).has(t)},J.prototype.set=function(t,e){var n=dt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Q.prototype.clear=function(){this.__data__=new K,this.size=0},Q.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Q.prototype.get=function(t){return this.__data__.get(t)},Q.prototype.has=function(t){return this.__data__.has(t)},Q.prototype.set=function(t,e){var n=this.__data__;if(n instanceof K){var r=n.__data__;if(!q||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new J(r)}return n.set(t,e),this.size=n.size,this};var ot,it=function(t,e,n){for(var r=-1,o=Object(t),i=n(t),u=i.length;u--;){var a=i[ot?u:++r];if(!1===e(o[a],a,o))break}return t};function ut(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":D&&D in Object(t)?function(t){var e=x.call(t,D),n=t[D];try{t[D]=void 0;var r=!0}catch(t){}var o=k.call(t);r&&(e?t[D]=n:delete t[D]);return o}(t):function(t){return k.call(t)}(t)}function at(t){return $t(t)&&ut(t)==o}function ct(t){return!(!Et(t)||function(t){return!!S&&S in t}(t))&&(wt(t)?z:c).test(function(t){if(null!=t){try{return $.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function lt(t){if(!Et(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=vt(t),n=[];for(var r in t)("constructor"!=r||!e&&x.call(t,r))&&n.push(r);return n}function st(t,e,n,r,o){t!==e&&it(e,(function(i,u){if(o||(o=new Q),Et(i))!function(t,e,n,r,o,i,u){var c=_t(t,n),l=_t(e,n),s=u.get(l);if(s)return void tt(t,n,s);var f=i?i(c,l,n+"",t,e,u):void 0,p=void 0===f;if(p){var d=jt(l),h=!d&&Ot(l),y=!d&&!h&&xt(l);f=l,d||h||y?jt(c)?f=c:$t(m=c)&&At(m)?f=function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(c):h?(p=!1,f=function(t,e){if(e)return t.slice();var n=t.length,r=I?I(n):new t.constructor(n);return t.copy(r),r}(l,!0)):y?(p=!1,v=l,_=!0?(b=v.buffer,g=new b.constructor(b.byteLength),new P(g).set(new P(b)),g):v.buffer,f=new v.constructor(_,v.byteOffset,v.length)):f=[]:function(t){if(!$t(t)||ut(t)!=a)return!1;var e=M(t);if(null===e)return!0;var n=x.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&$.call(n)==V}(l)||mt(l)?(f=c,mt(c)?f=function(t){return function(t,e,n,r){var o=!n;n||(n={});var i=-1,u=e.length;for(;++i<u;){var a=e[i],c=r?r(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),o?rt(n,a,c):et(n,a,c)}return n}(t,St(t))}(c):Et(c)&&!wt(c)||(f=function(t){return"function"!=typeof t.constructor||vt(t)?{}:X(M(t))}(l))):p=!1}var v,_,b,g;var m;p&&(u.set(l,f),o(f,l,r,i,u),u.delete(l));tt(t,n,f)}(t,e,u,n,st,r,o);else{var c=r?r(_t(t,u),i,u+"",t,e,o):void 0;void 0===c&&(c=i),tt(t,u,c)}}),St)}function ft(t,e){return bt(function(t,e,n){return e=H(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=H(r.length-e,0),u=Array(i);++o<i;)u[o]=r[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=r[o];return a[e]=n(u),m(t,this,a)}}(t,e,zt),t+"")}var pt=R?function(t,e){return R(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:zt;function dt(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function ht(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return ct(n)?n:void 0}function yt(t,e){var n=typeof t;return!!(e=null==e?r:e)&&("number"==n||"symbol"!=n&&l.test(t))&&t>-1&&t%1==0&&t<e}function vt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||T)}function _t(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var bt=function(t){var e=0,n=0;return function(){var r=B(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(pt);function gt(t,e){return t===e||t!=t&&e!=e}var mt=at(function(){return arguments}())?at:function(t){return $t(t)&&x.call(t,"callee")&&!N.call(t,"callee")},jt=Array.isArray;function At(t){return null!=t&&Tt(t.length)&&!wt(t)}var Ot=G||function(){return!1};function wt(t){if(!Et(t))return!1;var e=ut(t);return e==u||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Tt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}function Et(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function $t(t){return null!=t&&"object"==typeof t}var xt=g?function(t){return function(e){return t(e)}}(g):function(t){return $t(t)&&Tt(t.length)&&!!s[ut(t)]};function St(t){return At(t)?Z(t,!0):lt(t)}var kt,Vt=(kt=function(t,e,n){st(t,e,n)},ft((function(t,e){var n=-1,r=e.length,o=r>1?e[r-1]:void 0,i=r>2?e[2]:void 0;for(o=kt.length>3&&"function"==typeof o?(r--,o):void 0,i&&function(t,e,n){if(!Et(n))return!1;var r=typeof e;return!!("number"==r?At(n)&&yt(e,n.length):"string"==r&&e in n)&&gt(n[e],t)}(e[0],e[1],i)&&(o=r<3?void 0:o,r=1),t=Object(t);++n<r;){var u=e[n];u&&kt(t,u,n,o)}return t})));function zt(t){return t}t.exports=Vt}(Pe,Pe.exports);var Ie=Pe.exports;function Me(t){return Array.isArray(t)||null==t?t||[]:[t]}function Ce(t,e="."){const n=[],r=(t,o)=>{for(const[i,u]of Object.entries(t)){const t=o?`${o}${e}${i}`:i;null==u||Array.isArray(u)||"object"!=typeof u?n.push(t):r(u,t)}return n};return r(t)}var Ne=Object.freeze({__proto__:null,getProperty:X,setProperty:Ut,hasProperty:Le,mergeObject:Ie,ensureArray:Me,flattenMap:function(t,e="."){const n={},r=(t,o)=>{for(const[i,u]of Object.entries(t)){const t=o?`${o}${e}${i}`:i;null==u||Array.isArray(u)||"object"!=typeof u?n[t]=u:r(u,t)}return n};return r(t)},flattenKeys:Ce,unflattenMap:function(t){return Object.keys(t).reduce(((e,n)=>(Ut(e,n,X(t,n)),e)),{})},getFirstDefined:function(t,e,n){let r;for(const n of e){if(void 0!==r)return r;r=t[n]}const o=void 0!==n?t[n]:void 0;return void 0!==r&&void 0!==o&&(r=o),r}});const Ue={string:String,number:Number,integer:t=>{try{return parseInt(t+"")}catch(e){return t}},float:(t,e=2)=>{try{const n=parseFloat(t+"");return Number(n.toFixed(e))}catch(e){return t}},bigint:t=>{try{return BigInt(t+"")}catch(e){return t}},boolean:t=>!!/(true|yes|1)/.test(t+""),array:(t,e="string")=>Me(t).map((t=>Ue[e](t))),none:t=>t};function De(t,e){if(void 0===t)return function(t){let e=!1,n="none",r=[];if(Array.isArray(t)&&(t=t[0],e=!0),null==t)n="string";else if("string"==typeof t)n="string";else if("boolean"==typeof t)n="boolean";else if("number"==typeof t){const e=t%1!=0;n=e?"float":"integer";const o=e?Math.max(0,(t+"").split(".").length):0;o&&(r=[o])}return e&&(n=`[${n}]`),{dataType:n,dataTypeOptions:r}}(e);const n=t.split("|");return{dataType:n.shift()||"none",dataTypeOptions:[...n]}}function Re(t){const e={type:t.type,required:t.hasAttribute("required"),readonly:t.hasAttribute("readonly"),disabled:t.hasAttribute("disabled"),pattern:t.getAttribute("pattern")||"",min:t.getAttribute("min"),max:t.getAttribute("min"),minlength:t.getAttribute("min"),maxlength:t.getAttribute("min"),step:t.getAttribute("min")};return e.min=null!==e.min?parseInt(e.min+""):null,e.max=null!==e.max?parseInt(e.max+""):null,e.minlength=null!==e.minlength?parseInt(e.minlength+""):null,e.maxlength=null!==e.maxlength?parseInt(e.maxlength+""):null,e.step=null!==e.step?parseInt(e.step+""):null,e}function Ge(t,n=e,r=0){let o=[];if(function(t,n=e){return n.includes(t.nodeName)}(t,n)&&o.push(t),r>20)return o;if(t.childNodes){const e=Array.from(t.childNodes).reduce(((t,e)=>t=[...t,...Ge(e,n,r=1)]),[]);o=[...o,...e]}return o}function He(t,n,r=e){const o=new MutationObserver((t=>{for(let e=0;e<t.length;++e){for(let o=0;o<t[e].addedNodes.length;++o){const i=Ge(t[e].addedNodes[o],r);i&&i.length&&i.forEach((t=>n(t,"add")))}for(let o=0;o<t[e].removedNodes.length;++o){const i=Ge(t[e].removedNodes[o],r);i.length&&i.forEach((t=>n(t,"remove")))}}}));return o.observe(t,{childList:!0,subtree:!0}),()=>o.disconnect()}function Be(t,e){if(console.log("placeholder types:",e),!1===e)return!1;return(e?!0===e?r:e:r).includes(t.type)}function qe(t){if(!t)return"";const e=t.split(".");let n=e.shift();return n?(n=n.charAt(0).toUpperCase()+n.slice(1),[n,...e].join(" ")):""}const We={text:[Je,Ye],email:[Je,Ye],tel:[Je,Ye],"select-one":[Qe,Ke],"select-multiple":[Qe,Ke],checkbox:[function(t){const e=t.el;return t.virtual||!e?t.virtualValue:e.checked},function(t,e){const n=t.el;t.virtual||!n?t.virtualValue=!!/(true|1|yes)/.test(e+""):/(true|1|yes)/.test(e+"")&&n.setAttribute("checked","true")}],password:[Je,Ye],textarea:[Je,Ye],radio:[function(t){let e;const n=t.el;for(const t of n){if(void 0!==e)return e;t.checked&&(e=t.value)}return e},function(t,e){const n=t.el;t.virtual||!n?t.virtualValue=e:n.forEach((t=>{t.value===e&&t.setAttribute("checked","true")}))}],color:[Je,Ye],date:[Je,Ye],"datetime-local":[Je,Ye],file:[function(t){const e=t.el;return e.files?Array.from(e.files):[]},function(...t){}],hidden:[Je,Ye],month:[Je,Ye],number:[Je,Ye],range:[Je,Ye],time:[Je,Ye],url:[Je,Ye],week:[Je,Ye]},Xe=Object.keys(We);function Ye(t,e){const n=t.el;t.virtual||!n?t.virtualValue=e:n.value=e+""}function Ke(t,e){const n=t.el;if(t.virtual||!n)t.virtualValue="select-multiple"===t.type?Me(e):e;else{const t=Me(e).filter((t=>null!=t));if("select-multiple"===n.type){!function t(e,n){for(const r of n)if(r instanceof HTMLOptGroupElement)t(e,Array.from(r.children));else{const t=r.value;e.includes(t)?r.selected=!0:r.selected=!1}}(t,Array.from(n.children))}else n.value=t.shift()+""}}function Je(t){const e=t.el;return t.virtual||!e?t.virtualValue:e.value}function Qe(t){const e=t.el,n=[];if("select-multiple"===e.type){return function t(e){for(const r of e)r instanceof HTMLOptGroupElement?t(Array.from(r.children)):r.selected&&n.push(r.value);return n}(Array.from(e.children))}return e.value}t.DEFAULT_FORM_STATE=o,t.HTML5_INPUT_TYPES=n,t.HTML5_PLACEHOLDER_TYPES=r,t.MAX_DEPTH=20,t.VALID_MUTATION_NODES=e,t.default=function(t){(t={validateInit:!1,validateChange:!0,flattenErrors:!1,placeholders:!1,mergeUnbound:!0,unboundAttribute:"data-unbound",onCoerce:!0,...t}).initialValues={...t.initialValues};let e=null;const n={};let r,i={...o},u={},a={},c=[];const l={form:e,register:function(e){return e?(k(e).then((()=>{p({initialized:!0})})),r=He(e,((t,e)=>{i.submitted||("remove"===e?x(t):$(t))}),t.mutationNodes),{destroy:S}):{destroy:S}},field:function(t,e){let r,o=t;Array.isArray(t)||null===t||"object"!=typeof t?void 0!==e&&"string"==typeof t&&(r={name:t,type:"text",value:e},o=t):(r=t,o=r.name);const a="undefined"!=typeof window&&r instanceof Element;if(!n[o]){r={...{dataset:{},type:"text",virtual:!a},...r},$(r)}const c=n[o],l=c&&c.el;let s;const f={...u[o]||{},name:o,element:()=>l,get value(){return _(o)},set value(t){s&&clearTimeout(s),s=setTimeout((()=>{O(o,t)}),400)},reset:()=>{if(i.submitted)return;const t=j(o);g(o,t),d(o,{dirty:!1,touched:!1,pristine:!0,value:t})},validate:async()=>{if(i.submitted)return;return(await y(o))[o]}};return f},getValue:_,getValues:b,setValue:g,setValues:m,validate:y,getNativeValidators:function(t){const e=n[t];if(!(e&&e.el instanceof HTMLElement))return{};const r=e.el;return Array.isArray(r)?r.map((t=>Re(t))):Re(r)},reset:E,submit:function(t){T(t)},subscribe:f,unsubscribe:function(t){c=t?c.filter((e=>e!==t)):[]},destroy:S};function s(){const t=Object.entries(u).reduce(((t,[e,n])=>(Ut(t,e,n),t)),{});return{...i,errors:a,fields:t}}function f(t){return c.includes(t)||c.push(t),()=>{c=c.filter((e=>e!==t))}}function p(t={}){const e=Object.keys(a||{}).length>0;if(i={...i,valid:!e,invalid:e,...t},i.initialized)for(const t of c)t(s())}function d(t,e){const n=Le(a,t);u[t]={...u[t],valid:!n,invalid:n,...e};const{hasDirty:r,hasTouched:o}=function(){let t=!1,e=!1;for(const[,n]of Object.entries(u)){if(t&&e)break;t=n.dirty,e=n.touched}return{hasDirty:t,hasTouched:e}}();p({dirty:r,pristine:!o&&!r})}function h(t){const{[t]:e,...n}=u;u=n,p()}async function y(e){if(i.validating)return a;let n="string"==typeof e||Array.isArray(e)?"string"==typeof e?[e]:e:null,r=Array.isArray(e)||null===e||"object"!=typeof e?null:e;const o=!r;r=r||b(),n=n||Ce(r);const u=t.onValidate||(()=>{const e="undefined"!=typeof window,n=e&&1===window.__novalidator__;!1===t.onValidate||i.initialized||n||(console.warn('Failed to validate, validation handler NOT defined. To suppress this warning set "validator:false"'),e&&(window.__novalidator__=1))});p({validating:!0});const c=await u(r,n,l),s=null!=c||!!Object.keys(c||{}).length;return a=s?o?c:n.reduce(((e,n)=>{const r=X(a,n);return t.flattenErrors&&r?e[n]=r:!t.flattenErrors&&r&&Ut(e,n,r),e}),{}):{},p({validating:!1,invalid:s,valid:!s}),a}function v(){return Object.keys(n)}function _(e,r=t.onCoerce){const o=n[e];if(!o)return;let i=We[o.type][0](o);return r&&(i=!0===r?function(t,e,n){const r=t.startsWith("["),o=t.replace(/([|])/g,"");return"none"!==o&&Ue[o]?r?Me(n).map((t=>Ue[o](t,...e))):Ue[o](n,...e):n}(o.dataType,o.dataTypeOptions,i):r(e,i,{dataType:o.dataType,dataTypeOptions:o.dataTypeOptions})),i=null==i||"undefined"===i?"":i,i}function b(e=!0){let n={};const r=v();for(const t of r){const e=_(t);void 0!==e&&Ut(n,t,e)}return t.mergeUnbound&&(n=Ie({...t.initialValues},n)),"function"==typeof t.onTransform&&e&&(n=t.onTransform(n)),n}function g(t,e){if(void 0===e)return;const r=n[t];if(!r)return;(0,We[r.type][1])(r,e)}function m(t){if(void 0===t)return;const e=Object.entries(n);if(e&&e.length)for(const[n]of e){g(n,X(t,n))}}function j(t){const e=n[t];if(e)return e.defaultValue}function A(t){if(i.submitted)return;const e=t.currentTarget;d(e.name,{touched:!0}),e.removeEventListener("click",A),e.removeEventListener("touchend",A)}async function O(e,r){if(i.submitted)return;let o,u=e,a=!1;if("string"!=typeof e)o=e.currentTarget,u=o.name;else{a=n[u].virtual}r=r||_(u);const c=j(u);a&&g(u,r),r!==c?d(u,{dirty:!0,touched:!0,pristine:!1,value:r}):r===c&&d(u,{dirty:!1,touched:!0,pristine:!1}),t.validateChange&&await y(u)}function w(t){t.preventDefault(),E()}async function T(e){if(e&&e.preventDefault(),i.submitting||i.submitted||i.invalid||!t.onSubmit)return!1;p({submitting:!0,submitted:!1});const n=b(),r=await y();return Object.keys(r||{}).length>0?(t.onError&&t.onError(r,l),!1):(t.onSubmit(n,l),p({submitting:!1,submitted:!0,pristine:!1}),!1)}async function E(r,i=!1){if(!e)return;!function(e,r=!1){if(e){r&&(t.initialValues=e);for(const[t,r]of Object.entries(n)){let o=X(e,t);Array.isArray(o)&&"select-multiple"!==r.type&&(console.warn(`Element ${t} default value is an Array but is not of type select-multiple. Only the first value will be used.`),o=o[0]||""),"select-multiple"===r.type&&(o=void 0===o?[]:Array.isArray(o)?o:[o]),n[t].defaultValue=o}}}(r,i),e.reset();m(r||v().reduce(((t,e)=>{const r=n[e];return Ut(t,e,r.defaultValue),t}),{})),a={},p({...o,initialized:!0}),t.validateInit&&await y()}function $(...e){for(const r of e){if(!r)continue;const e=Xe.includes(r.type),o=r.hasAttribute&&r.hasAttribute(t.unboundAttribute||"data-unbound");if(!e||!r.name||o)continue;const i=r.name;let u=t.defaultGetter(i,r,t.initialValues||{});Array.isArray(u)&&"select-multiple"!==r.type&&(console.warn(`Element ${r.name} default value is an Array but is not of type select-multiple. Only the first value will be used.`),u=u[0]||"");const a=De(r.dataset.datatype,u);if("radio"===r.type){const t=n[i]||{};if(t.el=Me(t.el),t.el.includes(r))continue;t.el.push(r),t.type=r.type,t.defaultValue=u||r.checked&&r.value||"",t.virtualValue=t.defaultValue,t.dataType=a.dataType,t.dataTypeOptions=a.dataTypeOptions,t.virtual=r.virtual||!1,n[i]=t}else{if(void 0!==n[i])continue;const t={type:r.type,el:r,defaultValue:u||r.value,virtualValue:u||r.value,...a,virtual:r.virtual||!1};n[i]=t}if(t.placeholders&&Be(r,t.placeholders)&&!r.hasAttribute("placeholder")&&!r.virtual){const t=qe(r.name);t&&r.setAttribute("placeholder",t)}r.virtual||(r.addEventListener("change",O),r.addEventListener("click",A),r.addEventListener("touchend",A)),void 0!==u&&g(i,u),d(i,{pristine:!0,value:u,valid:!0,invalid:!1,touched:!1,dirty:!1})}}function x(...t){for(const e of t){const t=n[e.name];if(t){if(Array.isArray(t.el)){n[e.name].el=t.el.filter((t=>t!==e));n[e.name].el.length||delete n[e.name]}else delete n[e.name];h(e.name),t.virtual||(e.removeEventListener("change",O),e.removeEventListener("click",A),e.removeEventListener("touchend",A))}}}function S(){c=[],x(...Object.keys(n).reduce(((t,e)=>Array.isArray(e)?[...t,...e]:[...t,e]),[])),r&&r(),e&&(e.removeAttribute("novalidate"),e.removeEventListener("submit",T),e.removeEventListener("reset",w))}async function k(n){e=n,$(...Array.from(n.elements)),n.setAttribute("novalidate","novalidate"),n.addEventListener("submit",T),n.addEventListener("reset",w),t.subscribe&&f(t.subscribe),t.validateInit?await y(t.initialValues):setTimeout((()=>{p({})}))}return l},t.helpers=Ne,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
