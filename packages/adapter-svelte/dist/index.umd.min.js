/*!
 * @kensho/adapter-svelte v0.0.0
 * (c) Blujedi LLC
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["@kensho/adapter-svelte"]={})}(this,(function(t){"use strict";function e(){}Promise.resolve();const n=[];
/*!
     * @kensho/form v0.0.0
     * (c) Blujedi LLC
     * Released under the MIT License.
     */
var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o="__lodash_hash_undefined__",i="[object Function]",u="[object GeneratorFunction]",a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,l=/^\./,s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,p=/^\[object .+?Constructor\]$/,d="object"==typeof r&&r&&r.Object===Object&&r,h="object"==typeof self&&self&&self.Object===Object&&self,y=d||h||Function("return this")();var v,_=Array.prototype,b=Function.prototype,g=Object.prototype,m=y["__core-js_shared__"],j=(v=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",O=b.toString,A=g.hasOwnProperty,w=g.toString,E=RegExp("^"+O.call(A).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$=y.Symbol,T=_.splice,x=R(y,"Map"),S=R(Object,"create"),V=$?$.prototype:void 0,k=V?V.toString:void 0;function F(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function L(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function N(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function I(t,e){for(var n,r,o=t.length;o--;)if((n=t[o][0])===(r=e)||n!=n&&r!=r)return o;return-1}function P(t,e){var n;e=function(t,e){if(q(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||B(t))return!0;return c.test(t)||!a.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:q(n=e)?n:z(n);for(var r=0,o=e.length;null!=t&&r<o;)t=t[D(e[r++])];return r&&r==o?t:void 0}function C(t){if(!U(t)||(e=t,j&&j in e))return!1;var e,n=function(t){var e=U(t)?w.call(t):"";return e==i||e==u}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?E:p;return n.test(function(t){if(null!=t){try{return O.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function M(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function R(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return C(n)?n:void 0}F.prototype.clear=function(){this.__data__=S?S(null):{}},F.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},F.prototype.get=function(t){var e=this.__data__;if(S){var n=e[t];return n===o?void 0:n}return A.call(e,t)?e[t]:void 0},F.prototype.has=function(t){var e=this.__data__;return S?void 0!==e[t]:A.call(e,t)},F.prototype.set=function(t,e){return this.__data__[t]=S&&void 0===e?o:e,this},L.prototype.clear=function(){this.__data__=[]},L.prototype.delete=function(t){var e=this.__data__,n=I(e,t);return!(n<0)&&(n==e.length-1?e.pop():T.call(e,n,1),!0)},L.prototype.get=function(t){var e=this.__data__,n=I(e,t);return n<0?void 0:e[n][1]},L.prototype.has=function(t){return I(this.__data__,t)>-1},L.prototype.set=function(t,e){var n=this.__data__,r=I(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},N.prototype.clear=function(){this.__data__={hash:new F,map:new(x||L),string:new F}},N.prototype.delete=function(t){return M(this,t).delete(t)},N.prototype.get=function(t){return M(this,t).get(t)},N.prototype.has=function(t){return M(this,t).has(t)},N.prototype.set=function(t,e){return M(this,t).set(t,e),this};var z=G((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(B(t))return k?k.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return l.test(t)&&n.push(""),t.replace(s,(function(t,e,r,o){n.push(r?o.replace(f,"$1"):e||t)})),n}));function D(t){if("string"==typeof t||B(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function G(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return n.cache=i.set(o,u),u};return n.cache=new(G.Cache||N),n}G.Cache=N;var q=Array.isArray;function U(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function B(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==w.call(t)}var W=function(t,e,n){var r=null==t?void 0:P(t,e);return void 0===r?n:r},X="__lodash_hash_undefined__",H="[object Function]",J="[object GeneratorFunction]",K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,Y=/^\./,Z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tt=/\\(\\)?/g,et=/^\[object .+?Constructor\]$/,nt=/^(?:0|[1-9]\d*)$/,rt="object"==typeof r&&r&&r.Object===Object&&r,ot="object"==typeof self&&self&&self.Object===Object&&self,it=rt||ot||Function("return this")();var ut=Array.prototype,at=Function.prototype,ct=Object.prototype,lt=it["__core-js_shared__"],st=function(){var t=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ft=at.toString,pt=ct.hasOwnProperty,dt=ct.toString,ht=RegExp("^"+ft.call(pt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yt=it.Symbol,vt=ut.splice,_t=St(it,"Map"),bt=St(Object,"create"),gt=yt?yt.prototype:void 0,mt=gt?gt.toString:void 0;function jt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ot(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function At(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wt(t,e,n){var r=t[e];pt.call(t,e)&&Nt(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function Et(t,e){for(var n=t.length;n--;)if(Nt(t[n][0],e))return n;return-1}function $t(t){if(!Pt(t)||(e=t,st&&st in e))return!1;var e,n=function(t){var e=Pt(t)?dt.call(t):"";return e==H||e==J}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?ht:et;return n.test(function(t){if(null!=t){try{return ft.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function Tt(t,e,n,r){if(!Pt(t))return t;e=function(t,e){if(It(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||Ct(t))return!0;return Q.test(t)||!K.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:function(t){return It(t)?t:kt(t)}(e);for(var o=-1,i=e.length,u=i-1,a=t;null!=a&&++o<i;){var c=Ft(e[o]),l=n;if(o!=u){var s=a[c];void 0===(l=r?r(s,c,a):void 0)&&(l=Pt(s)?s:Vt(e[o+1])?[]:{})}wt(a,c,l),a=a[c]}return t}function xt(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function St(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return $t(n)?n:void 0}function Vt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||nt.test(t))&&t>-1&&t%1==0&&t<e}jt.prototype.clear=function(){this.__data__=bt?bt(null):{}},jt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},jt.prototype.get=function(t){var e=this.__data__;if(bt){var n=e[t];return n===X?void 0:n}return pt.call(e,t)?e[t]:void 0},jt.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:pt.call(e,t)},jt.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?X:e,this},Ot.prototype.clear=function(){this.__data__=[]},Ot.prototype.delete=function(t){var e=this.__data__,n=Et(e,t);return!(n<0)&&(n==e.length-1?e.pop():vt.call(e,n,1),!0)},Ot.prototype.get=function(t){var e=this.__data__,n=Et(e,t);return n<0?void 0:e[n][1]},Ot.prototype.has=function(t){return Et(this.__data__,t)>-1},Ot.prototype.set=function(t,e){var n=this.__data__,r=Et(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},At.prototype.clear=function(){this.__data__={hash:new jt,map:new(_t||Ot),string:new jt}},At.prototype.delete=function(t){return xt(this,t).delete(t)},At.prototype.get=function(t){return xt(this,t).get(t)},At.prototype.has=function(t){return xt(this,t).has(t)},At.prototype.set=function(t,e){return xt(this,t).set(t,e),this};var kt=Lt((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(Ct(t))return mt?mt.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return Y.test(t)&&n.push(""),t.replace(Z,(function(t,e,r,o){n.push(r?o.replace(tt,"$1"):e||t)})),n}));function Ft(t){if("string"==typeof t||Ct(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Lt(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return n.cache=i.set(o,u),u};return n.cache=new(Lt.Cache||At),n}function Nt(t,e){return t===e||t!=t&&e!=e}Lt.Cache=At;var It=Array.isArray;function Pt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ct(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==dt.call(t)}var Mt=function(t,e,n){return null==t?t:Tt(t,e,n)},Rt="__lodash_hash_undefined__",zt=9007199254740991,Dt="[object Arguments]",Gt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qt=/^\w*$/,Ut=/^\./,Bt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wt=/\\(\\)?/g,Xt=/^\[object .+?Constructor\]$/,Ht=/^(?:0|[1-9]\d*)$/,Jt="object"==typeof r&&r&&r.Object===Object&&r,Kt="object"==typeof self&&self&&self.Object===Object&&self,Qt=Jt||Kt||Function("return this")();var Yt=Array.prototype,Zt=Function.prototype,te=Object.prototype,ee=Qt["__core-js_shared__"],ne=function(){var t=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),re=Zt.toString,oe=te.hasOwnProperty,ie=te.toString,ue=RegExp("^"+re.call(oe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ae=Qt.Symbol,ce=te.propertyIsEnumerable,le=Yt.splice,se=je(Qt,"Map"),fe=je(Object,"create"),pe=ae?ae.prototype:void 0,de=pe?pe.toString:void 0;function he(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ye(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ve(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function _e(t,e){for(var n,r,o=t.length;o--;)if((n=t[o][0])===(r=e)||n!=n&&r!=r)return o;return-1}function be(t,e){return null!=t&&oe.call(t,e)}function ge(t){if(!Se(t)||(e=t,ne&&ne in e))return!1;var e,n=Te(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?ue:Xt;return n.test(function(t){if(null!=t){try{return re.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function me(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function je(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return ge(n)?n:void 0}function Oe(t,e,n){var r;e=function(t,e){if($e(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||ke(t))return!0;return qt.test(t)||!Gt.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:$e(r=e)?r:Ae(r);for(var o,i=-1,u=e.length;++i<u;){var a=we(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||!!(u=t?t.length:0)&&xe(u)&&function(t,e){return!!(e=null==e?zt:e)&&("number"==typeof t||Ht.test(t))&&t>-1&&t%1==0&&t<e}(a,u)&&($e(t)||function(t){return function(t){return Ve(t)&&function(t){return null!=t&&xe(t.length)&&!Te(t)}(t)}(t)&&oe.call(t,"callee")&&(!ce.call(t,"callee")||ie.call(t)==Dt)}(t))}he.prototype.clear=function(){this.__data__=fe?fe(null):{}},he.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},he.prototype.get=function(t){var e=this.__data__;if(fe){var n=e[t];return n===Rt?void 0:n}return oe.call(e,t)?e[t]:void 0},he.prototype.has=function(t){var e=this.__data__;return fe?void 0!==e[t]:oe.call(e,t)},he.prototype.set=function(t,e){return this.__data__[t]=fe&&void 0===e?Rt:e,this},ye.prototype.clear=function(){this.__data__=[]},ye.prototype.delete=function(t){var e=this.__data__,n=_e(e,t);return!(n<0)&&(n==e.length-1?e.pop():le.call(e,n,1),!0)},ye.prototype.get=function(t){var e=this.__data__,n=_e(e,t);return n<0?void 0:e[n][1]},ye.prototype.has=function(t){return _e(this.__data__,t)>-1},ye.prototype.set=function(t,e){var n=this.__data__,r=_e(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},ve.prototype.clear=function(){this.__data__={hash:new he,map:new(se||ye),string:new he}},ve.prototype.delete=function(t){return me(this,t).delete(t)},ve.prototype.get=function(t){return me(this,t).get(t)},ve.prototype.has=function(t){return me(this,t).has(t)},ve.prototype.set=function(t,e){return me(this,t).set(t,e),this};var Ae=Ee((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(ke(t))return de?de.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return Ut.test(t)&&n.push(""),t.replace(Bt,(function(t,e,r,o){n.push(r?o.replace(Wt,"$1"):e||t)})),n}));function we(t){if("string"==typeof t||ke(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ee(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return n.cache=i.set(o,u),u};return n.cache=new(Ee.Cache||ve),n}Ee.Cache=ve;var $e=Array.isArray;function Te(t){var e=Se(t)?ie.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}function xe(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=zt}function Se(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ve(t){return!!t&&"object"==typeof t}function ke(t){return"symbol"==typeof t||Ve(t)&&"[object Symbol]"==ie.call(t)}var Fe=function(t,e){return null!=t&&Oe(t,e,be)};const Le=["INPUT","SELECT","TEXTAREA"],Ne=["email","number","date","datetime-local","time","url","tel","color","textarea"],Ie={string:String,number:Number,integer:t=>{try{return parseInt(t+"")}catch(e){return t}},float:(t,e=2)=>{try{const n=parseFloat(t+"");return Number(n.toFixed(e))}catch(e){return t}},bigint:t=>{try{return BigInt(t+"")}catch(e){return t}},boolean:t=>!!/(true|yes|1)/.test(t+""),array:(t,e="string")=>Ge(t).map((t=>Ie[e])),none:t=>t};function Pe(t,e){if(void 0===t)return function(t){let e=!1,n="none",r=[];if(Array.isArray(t)&&(t=t[0],e=!0),"string"==typeof t)n="string";else if("boolean"==typeof t)n="boolean";else if("number"==typeof t){const e=t%1!=0;n=e?"float":"integer";const o=e?Math.max(0,(t+"").split(".").length):0;o&&(r=[o])}return e&&(n=`[${n}]`),{dataType:n,dataTypeOptions:r}}(e);const n=t.split("|");return{dataType:n.shift()||"none",dataTypeOptions:[...n]}}function Ce(t){const e={type:t.type,required:t.hasAttribute("required"),readonly:t.hasAttribute("readonly"),disabled:t.hasAttribute("disabled"),pattern:t.getAttribute("pattern")||"",min:t.getAttribute("min"),max:t.getAttribute("min"),minlength:t.getAttribute("min"),maxlength:t.getAttribute("min"),step:t.getAttribute("min")};return e.min=null!==e.min?parseInt(e.min+""):null,e.max=null!==e.max?parseInt(e.max+""):null,e.minlength=null!==e.minlength?parseInt(e.minlength+""):null,e.maxlength=null!==e.maxlength?parseInt(e.maxlength+""):null,e.step=null!==e.step?parseInt(e.step+""):null,e}function Me(t,e=Le){return e.includes(t.nodeName)}function Re(t=16){return"#"+(16777215*Math.random()<<0).toString(t)}function ze(t,e=Le,n=0){let r=[];if(Me(t,e)&&r.push(t),n>20)return r;if(t.childNodes){const o=Array.from(t.childNodes).reduce(((t,r)=>t=[...t,...ze(r,e,n=1)]),[]);r=[...r,...o]}return r}function De(t,e,n=Le){const r=new MutationObserver((t=>{for(let r=0;r<t.length;++r){for(let o=0;o<t[r].addedNodes.length;++o){const i=t[r].addedNodes[o];Me(i,n)&&e(i,"add")}for(let o=0;o<t[r].removedNodes.length;++o){const i=ze(t[r].removedNodes[o],n);i.length&&i.forEach((t=>e(t,"remove")))}}}));return r.observe(t,{childList:!0,subtree:!0}),()=>r.disconnect()}function Ge(t){return Array.isArray(t)||null==t?t||[]:[t]}function qe(t,e){if(console.log("placeholder types:",e),!1===e)return!1;return(e?!0===e?Ne:e:Ne).includes(t.type)}function Ue(t){if(!t)return"";const e=t.split(".");let n=e.shift();return n=n?.charAt(0).toUpperCase()+n?.slice(1),[n,...e].join(" ")}const Be={text:[Je,Xe],email:[Je,Xe],tel:[Je,Xe],"select-one":[Ke,He],"select-multiple":[Ke,He],checkbox:[function(t){const e=t.el;return e?e.checked:t.virtualValue},function(t,e){const n=t.el;n?/(true|1|yes)/.test(e+"")&&n.setAttribute("checked","true"):t.virtualValue=!!/(true|1|yes)/.test(e+"")}],password:[Je,Xe],textarea:[Je,Xe],radio:[function(t){let e;const n=t.el;for(const t of n){if(void 0!==e)return e;t.checked&&(e=t.value)}return e},function(t,e){const n=t.el;n?n.forEach((t=>{t.value===e&&t.setAttribute("checked","true")})):t.virtualValue=e}],color:[Je,Xe],date:[Je,Xe],"datetime-local":[Je,Xe],file:[function(t){const e=t.el;return e.files?Array.from(e.files):[]},function(...t){}],hidden:[Je,Xe],month:[Je,Xe],number:[Je,Xe],range:[Je,Xe],time:[Je,Xe],url:[Je,Xe],week:[Je,Xe]},We=Object.keys(Be);function Xe(t,e){const n=t.el;n?n.value=e+"":t.virtualValue=e}function He(t,e){const n=t.el;if(n){const t=Ge(e);"select-multiple"===n.type?Array.from(n.children).forEach((e=>{const n=e,r=n.value;t.includes(r)?n.selected=!0:n.selected=!1})):n.value=e+""}else t.virtualValue=Ge(e)}function Je(t){const e=t.el;return e?e.value:t.virtualValue}function Ke(t){const e=t.el;if("select-multiple"===e.type){const t=[];return Array.from(e.children).forEach((e=>{const n=e;n.selected&&t.push(n.value)})),t}return e.value}const Qe={initialized:!1,validating:!1,pristine:!0,dirty:!1,valid:!0,invalid:!1,submitting:!1,submitted:!1};function Ye(t){let e;(t={initValidate:!0,flattenOutput:!1,castValues:!0,placeholders:!1,...t}).initialValues={...t.initialValues};const n={};let r,o=[],i={...Qe},u={},a={};const c={form:function(e){return e?(S(e).then((()=>{f({initialized:!0})})),r=De(e,((t,e)=>{i.submitted||("remove"===e?T(t):$(t))}),t.mutationNodes),{destroy:x}):{destroy:x}},field:E,reset:w,getValue:y,getValues:v,setValue:_,setValues:b,getFields:function(){return Object.keys(n).reduce(((t,e)=>(t[e]=E(e),t)),{})},validate:h,destroy:x,getNativeValidators:function(t){const e=n[t]?.el;return e?Array.isArray(e)?e.map((t=>Ce(t))):Ce(e):{}},subscribe:s};function l(){let e=u;return t.flattenOutput||(e=Object.entries(e).reduce(((t,[e,n])=>(Mt(t,e,n),t)),{})),{...i,errors:a,fields:e}}function s(t){return o.includes(t)||o.push(t),()=>{o=o.filter((e=>e!==t))}}function f(t=i){const e=Object.keys(a||{}).length>0;if(i={...i,valid:!e,invalid:e,...t},i.initialized)for(const t of o)t(l())}function p(t,e){const n=Fe(a,t);u[t]={...u[t],valid:!n,invalid:n,...e};const{hasDirty:r,hasTouched:o}=function(){let t=!1,e=!1;for(const[,n]of Object.entries(u)){if(t&&e)break;t=n.dirty,e=n.touched}return{hasDirty:t,hasTouched:e}}();f({dirty:r,pristine:!o&&!r})}function d(t){const{[t]:e,...n}=u;u=n,f()}async function h(e=v()){if(i.validating)return a;const n=t.validator||(()=>{!1===t.validator||i.initialized||console.warn('Failed to validate, validation handler NOT defined. To suppress this warning set "validator:false"')});f({validating:!0});const r=await n(e);return a=t.flattenOutput?function(t,e="."){const n={},r=(t,o)=>{for(const[i,u]of Object.entries(t)){const t=o?`${o}${e}${i}`:i;u&&"object"==typeof u&&!Array.isArray(u)?r(u,t):n[t]=u}return n};return r(t)}(r||{}):r,setTimeout((()=>{f({validating:!1})}),100),a}function y(e,r=!1){const o=n[e];if(!o)return;let i=Be[o.type][0](o);return t.castValues&&(i=function(t,e,n){const r=t.startsWith("["),o=t.replace(/([|])/g,"");return"none"!==o&&Ie[o]?r?Ge(n).map((t=>Ie[o](t,...e))):Ie[o](n,...e):n}(o.dataType,o.dataTypeOptions,i)),i}function v(t=!1){const e={},r=Object.keys(n);for(const n of r){const r=y(n);void 0!==r&&(t?e[n]=r:Mt(e,n,r))}return e}function _(t,e){if(void 0===e)return;const r=n[t];if(!r)return;(0,Be[r.type][1])(r,e)}function b(t){if(void 0===t)return;const e=Object.entries(n);if(e&&e.length)for(const[n]of e){_(n,W(t,n))}}function g(t){const e=n[t];return e?e.defaultValue:null}function m(t){if(i.submitted)return;const e=t.currentTarget;p(e.name,{touched:!0}),e.removeEventListener("click",m),e.removeEventListener("touchend",m)}async function j(t){if(i.submitted)return;const e=t.currentTarget,n=y(e.name),r=g(e.name);n!==r?p(e.name,{dirty:!0,touched:!0,pristine:!1}):n===r&&p(e.name,{dirty:!1,touched:!0,pristine:!1}),await h()}function O(t){t.preventDefault(),w()}async function A(e){if(e.preventDefault(),i.submitting||i.submitted)return!1;f({submitting:!0});const n=v();return a=await h(n),a=a||{},Object.keys(a).length?(t.onError&&t.onError(a,c),!1):(t.onSubmit(n,c),setTimeout((()=>{f({submitting:!1,submitted:!0,pristine:!1})}),100),!1)}async function w(n){e.reset(),b(n||{...t.initialValues}),a={},f({...Qe}),await h()}function E(t,e){const r=n[t]?.el,o=void 0!==e;if(o&&!Array.isArray(r))throw new Error(`Attempted to index non indexable field "${t}".`);const a=o?r[e]:r,c=u[t]||{};return{el:a,get value(){return y(t)},set value(e){i.submitted||_(t,e)},get pristine(){return c.pristine},get dirty(){return c.dirty},get touched(){return c.touched},get invalid(){return c.invalid},get valid(){return c.valid},reset:()=>{i.submitted||(_(t,g(t)),p(t,{dirty:!1,touched:!1,pristine:!0}))},validate:async()=>{if(i.submitted)return;const e={[t]:y(t)};return(await h(e))[t]}}}function $(...e){for(const r of e){if(!We.includes(r.type)||""===r.dataset.unbound)continue;r.name||(r.name=Re());const e=r.name;let o=W(t.initialValues,e);Array.isArray(o)&&"select-multiple"!==r.type&&(console.warn(`Element ${r.name} default value is an Array but is not of type select-multiple. Only the first value will be used.`),o=o[0]||"");const i=Pe(r.dataset.datatype,o);if("radio"===r.type){if(n[e]=n[e]||{},n[e].el=Ge(n[e].el),n[e].el.includes(r))continue;n[e].el.push(r),n[e].type=r.type,n[e].defaultValue=o||r.checked&&r.value||"",n[e].virtualValue=void 0,n[e].dataType=i.dataType,n[e].dataTypeOptions=i.dataTypeOptions}else{if(void 0!==n[e])continue;n[e]={type:r.type,el:r,defaultValue:o||r.value,virtualValue:void 0,...i}}if(t.placeholders&&qe(r,t.placeholders)&&!r.hasAttribute("placeholder")){const t=Ue(r.name);t&&r.setAttribute("placeholder",t)}r.addEventListener("change",j),r.addEventListener("click",m),r.addEventListener("touchend",m),void 0!==o&&_(e,W(t.initialValues,e)),p(e,{pristine:!0,value:o,valid:!0,invalid:!1,touched:!1,dirty:!1})}}function T(...t){for(const e of t){const t=n[e.name];if(t){if(Array.isArray(t.el)){n[e.name].el=t.el.filter((t=>t!==e));n[e.name].el.length||delete n[e.name]}else delete n[e.name];d(e.name),e.removeEventListener("change",j),e.removeEventListener("click",m),e.removeEventListener("touchend",m)}}}function x(){T(...Object.keys(n).reduce(((t,e)=>Array.isArray(e)?[...t,...e]:[...t,e]),[])),r&&r(),e.removeEventListener("submit",A),e.removeEventListener("reset",O)}async function S(n){$(...Array.from(n.elements)),n.setAttribute("novalidate","novalidate"),n.addEventListener("submit",A),n.addEventListener("reset",O),e=n,t.subscribe&&s(t.subscribe),t.initValidate&&await h(t.initialValues)}return c}function Ze(t){const{subscribe:r,set:o}=function(t,r=e){let o;const i=new Set;function u(e){if(u=e,((r=t)!=r?u==u:r!==u||r&&"object"==typeof r||"function"==typeof r)&&(t=e,o)){const e=!n.length;for(const e of i)e[1](),n.push(e,t);if(e){for(let t=0;t<n.length;t+=2)n[t][0](n[t+1]);n.length=0}}var r,u}return{set:u,update:function(e){u(e(t))},subscribe:function(n,a=e){const c=[n,a];return i.add(c),1===i.size&&(o=r(u)||e),n(t),()=>{i.delete(c),0===i.size&&(o(),o=null)}}}}(t);return{subscribe:r,set:o}}t.default=function(t){const e=Ye(t),n=Ze({});return e.subscribe(n.set),{...e,store:n}},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
